{"version":3,"sources":["webpack:///./src/views/Streamer.vue?0f8d","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/views/Streamer.vue?985e","webpack:///./src/assets/svgs/video.svg","webpack:///./src/assets/svgs/audio.svg","webpack:///./src/components/DesktopCapturer.vue?dc7c","webpack:///src/components/DesktopCapturer.vue","webpack:///./src/components/DesktopCapturer.vue?3fdb","webpack:///./src/components/DesktopCapturer.vue","webpack:///./src/components/StreamerConnection.vue?a5e0","webpack:///src/components/StreamerConnection.vue","webpack:///./src/components/StreamerConnection.vue?043f","webpack:///./src/components/StreamerConnection.vue","webpack:///src/views/Streamer.vue","webpack:///./src/views/Streamer.vue?0983","webpack:///./src/views/Streamer.vue","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","isRegExp","module","exports","it","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","isVideo","on","onIsSharing","onGotStream","onSetDefaults","bandwidth","codecs","room_id","room_password","onSessionId","onViewerCount","onIdTaken","class","live","isSharingOn","sessionId","_v","_s","useridAlreadyTaken","_e","directives","name","rawName","value","expression","domProps","setRoomName","$event","composing","_m","setCodecs","setBandwidth","startStream","viewerCount","stopStream","staticRenderFns","functional","data","children","classNames","style","staticStyle","rest","Object","assign","concat","props","enableVideo","Boolean","isSharing","enableAudio","watch","$emit","newValue","methods","setDefaults","captureDesktop","onAccessApproved","video","audio","autoGainControl","echoCancellation","noiseSuppression","googDisableLocalEcho","startCapturing","gotStream","stream","addEventListener","addStreamStopListener","streamEndedEvent","getAudioTracks","forEach","track","getVideoTracks","component","type","Number","default","roomPassword","roomId","connection","mounted","window","shareStreamUsingRTCMultiConnection","socketURL","autoCloseEntireSession","socketMessageEvent","password","enableLogs","session","oneway","candidates","stun","turn","iceTransportPolicy","iceProtocols","tcp","udp","optionalArgument","optional","mandatory","channel","sessionid","userid","autoReDialOnFailure","getExternalIceServers","iceServers","IceServersHandler","processSdp","sdp","CodecsHandler","min","max","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","onstream","onstreamended","event","mediaElement","pause","onUserIdAlreadyTaken","dontCaptureUserMedia","attachStreams","push","removeTrack","text","clearInterval","looper","socketCustomEvent","error","alert","onSocketDisconnect","onSocketError","setTimeout","onmessage","newChatMessage","receivedChatMessage","checkmark_id","open","roomOpenCallback","onleave","participants","count","onPeerStateChanged","setViewerCount","getTracks","stop","close","closeSocket","replace","components","LogoSvg","VideoSvg","AudioSvg","DesktopCapturer","StreamerConnection","desktop_id","constraints","localStorage","getItem","streaming_method","protectedRoutes","$refs","capturer","setItem","parseInt","codec","id","takenID","DESCRIPTORS","global","isForced","redefine","has","classof","inheritIfRequired","toPrimitive","fails","create","getOwnPropertyNames","f","getOwnPropertyDescriptor","defineProperty","trim","NUMBER","NativeNumber","NumberPrototype","prototype","BROKEN_CLASSOF","toNumber","argument","first","third","radix","maxCode","digits","index","code","charCodeAt","NaN","slice","key","NumberWrapper","dummy","valueOf","call","keys","split","j","constructor","wellKnownSymbol","MATCH","METHOD_NAME","regexp","e","$includes","addToUnscopables","arrayMethodUsesToLength","USES_TO_LENGTH","ACCESSORS","1","el"],"mappings":"4GAAA,yBAAqiB,EAAG,G,kCCCxiB,IAAIA,EAAI,EAAQ,QACZC,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QACjCC,EAAuB,EAAQ,QAInCH,EAAE,CAAEI,OAAQ,SAAUC,OAAO,EAAMC,QAASH,EAAqB,aAAe,CAC9EI,SAAU,SAAkBC,GAC1B,SAAUC,OAAOP,EAAuBQ,OACrCC,QAAQV,EAAWO,GAAeI,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,uBCX/E,IAAIC,EAAW,EAAQ,QAEvBC,EAAOC,QAAU,SAAUC,GACzB,GAAIH,EAASG,GACX,MAAMC,UAAU,iDAChB,OAAOD,I,2CCLX,IAAIE,EAAS,WAAa,IAAIC,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,kBAAkB,CAACG,IAAI,WAAWC,MAAM,CAAC,YAAcP,EAAIQ,SAASC,GAAG,CAAC,UAAYT,EAAIU,YAAY,UAAYV,EAAIW,YAAY,YAAcX,EAAIY,iBAAiBT,EAAG,qBAAqB,CAACG,IAAI,aAAaC,MAAM,CAAC,UAAYP,EAAIa,UAAU,OAASb,EAAIc,OAAO,OAASd,EAAIe,QAAQ,aAAef,EAAIgB,eAAeP,GAAG,CAAC,UAAYT,EAAIiB,YAAY,YAAcjB,EAAIkB,cAAc,QAAUlB,EAAImB,aAAahB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,UAAUJ,EAAG,MAAM,CAACiB,MAAM,CAAEC,KAAMrB,EAAIsB,aAAetB,EAAIuB,WAAYhB,MAAM,CAAC,GAAK,mBAAmB,CAACP,EAAIwB,GAAG,WAAW,GAAGrB,EAAG,MAAM,CAACE,YAAY,cAAc,CAAEL,EAAsB,mBAAEG,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,aAAa,CAACP,EAAIwB,GAAG,cAAcrB,EAAG,IAAI,CAACH,EAAIwB,GAAG,IAAIxB,EAAIyB,GAAGzB,EAAI0B,oBAAoB,OAAO1B,EAAIwB,GAAG,qDAAqDxB,EAAI2B,KAAO3B,EAAIsB,aAAgBtB,EAAIuB,UAAygEvB,EAAI2B,KAAlgExB,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,kBAAkB,CAACJ,EAAG,QAAQ,CAACE,YAAY,YAAYE,MAAM,CAAC,GAAK,kBAAkB,CAACJ,EAAG,OAAO,CAACE,YAAY,YAAY,CAACL,EAAIwB,GAAG,YAAYrB,EAAG,QAAQ,CAACyB,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAO/B,EAAW,QAAEgC,WAAW,YAAYzB,MAAM,CAAC,GAAK,UAAU,KAAO,OAAO,YAAc,UAAU0B,SAAS,CAAC,MAASjC,EAAW,SAAGS,GAAG,CAAC,OAAST,EAAIkC,YAAY,KAAOlC,EAAIkC,YAAY,MAAQ,SAASC,GAAWA,EAAOpD,OAAOqD,YAAqBpC,EAAIe,QAAQoB,EAAOpD,OAAOgD,aAAY5B,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,UAAU,OAAS,KAAK,CAACJ,EAAG,MAAM,CAACE,YAAY,SAAS,CAACL,EAAIwB,GAAG,aAAarB,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACL,EAAIqC,GAAG,GAAGlC,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACH,EAAIwB,GAAG,SAASrB,EAAG,SAAS,CAACI,MAAM,CAAC,GAAK,UAAUE,GAAG,CAAC,OAAST,EAAIsC,YAAY,CAACnC,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,UAAU,SAAW,KAAK,CAACP,EAAIwB,GAAG,mBAAmBrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACP,EAAIwB,GAAG,SAASrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACP,EAAIwB,GAAG,SAASrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIwB,GAAG,kBAAkBrB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,QAAQ,CAACH,EAAIwB,GAAG,aAAarB,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,YAAY,KAAO,OAAO,MAAQ,GAAG,YAAc,mCAAmCE,GAAG,CAAC,OAAST,EAAIuC,sBAAsBvC,EAAIqC,GAAG,OAAOlC,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,mBAAmB,CAACJ,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,UAAU,CAACJ,EAAG,MAAM,CAACE,YAAY,SAAS,CAACL,EAAIwB,GAAG,WAAWrB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,GAAK,gBAAgBE,GAAG,CAAC,MAAQ,SAAS0B,GAAQ,OAAOnC,EAAIwC,aAAY,MAAS,CAACrC,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,YAAYH,EAAIwB,GAAG,UAAU,OAAOrB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,GAAK,gBAAgBE,GAAG,CAAC,MAAQ,SAAS0B,GAAQ,OAAOnC,EAAIwC,iBAAiB,CAACrC,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,YAAYH,EAAIwB,GAAG,eAAe,eAAyBxB,EAAIsB,aAAetB,EAAIuB,UAAWpB,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,iBAAiB,CAACJ,EAAG,cAAc,CAACI,MAAM,CAAC,GAAK,cAAc,GAAKP,EAAIuB,UAAU,OAAS,WAAW,CAACvB,EAAIwB,GAAGxB,EAAIyB,GAAI,SAAWzB,EAAIuB,cAAepB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CAACI,MAAM,CAAC,GAAK,yBAAyBP,EAAIwB,GAAGxB,EAAIyB,GAAGzB,EAAIyC,aAAa,IAAIzC,EAAIyB,GAAuB,IAApBzB,EAAIyC,YAAoB,SAAW,cAActC,EAAG,SAAS,CAACI,MAAM,CAAC,GAAK,eAAe,KAAO,UAAUE,GAAG,CAAC,MAAQT,EAAI0C,aAAa,CAAC1C,EAAIwB,GAAG,kBAAkB,GAAGxB,EAAI2B,KAAK3B,EAAIqC,GAAG,MAAM,IAChgHM,EAAkB,CAAC,WAAa,IAAI3C,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACH,EAAIwB,GAAG,cAAcrB,EAAG,SAAS,CAACI,MAAM,CAAC,GAAK,gBAAgB,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,aAAa,SAAW,KAAK,CAACP,EAAIwB,GAAG,gBAAgBrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACP,EAAIwB,GAAG,gBAAgBrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,UAAU,CAACP,EAAIwB,GAAG,qBAAqBrB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIwB,GAAG,eAAerB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIwB,GAAG,eAAerB,EAAG,SAAS,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIwB,GAAG,wBAAwB,WAAa,IAAIxB,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACF,EAAG,QAAQ,CAACH,EAAIwB,GAAG,iBAAiBrB,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAK,gBAAgB,KAAO,WAAW,MAAQ,GAAG,YAAc,qBAAqB,WAAa,IAAIP,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiBE,MAAM,CAAC,KAAO,8CAA8C,IAAM,aAAa,OAAS,WAAW,CAACP,EAAIwB,GAAG,oC,sDCA5rC,GACboB,YAAY,EACZ,OAAO3C,EAAID,GACT,MAAM,GAAEG,EAAE,GAAEqB,EAAE,KAAEqB,EAAI,SAAEC,EAAW,IAAO9C,GAGtCoB,MAAO2B,EAAU,YACjB1C,EAAW,MACX2C,EAAK,YACLC,EAAW,MACX1C,EAAQ,MACL2C,GACDL,EAEJ,OAAO1C,EACL,MACA,CACEiB,MAAO,CAAC2B,EAAW1C,GACnB2C,MAAO,CAACA,EAAMC,GACd1C,MAAO4C,OAAOC,OAAO,CAAC,MAAQ,6BAA6B,QAAU,aAAc7C,MAChF2C,GAELJ,EAASO,OAAO,CAAClD,EAAG,IAAI,CAACI,MAAM,CAAC,KAAO,OAAO,YAAY,YAAY,CAACJ,EAAG,OAAO,CAACI,MAAM,CAAC,EAAI,mMCtBpF,GACbqC,YAAY,EACZ,OAAO3C,EAAID,GACT,MAAM,GAAEG,EAAE,GAAEqB,EAAE,KAAEqB,EAAI,SAAEC,EAAW,IAAO9C,GAGtCoB,MAAO2B,EAAU,YACjB1C,EAAW,MACX2C,EAAK,YACLC,EAAW,MACX1C,EAAQ,MACL2C,GACDL,EAEJ,OAAO1C,EACL,MACA,CACEiB,MAAO,CAAC2B,EAAW1C,GACnB2C,MAAO,CAACA,EAAMC,GACd1C,MAAO4C,OAAOC,OAAO,CAAC,MAAQ,6BAA6B,QAAU,aAAc7C,MAChF2C,GAELJ,EAASO,OAAO,CAAClD,EAAG,OAAO,CAACI,MAAM,CAAC,EAAI,qhBCvB/C,EAAS,WAAa,IAAIP,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAC/F,EAAkB,G,4CCItB,GACE0B,KAAM,kBACNyB,MAAO,CACLC,YAAaC,SAEfX,KALF,WAMI,MAAO,CACLY,WAAW,EACXC,aAAa,IAGjBC,MAAO,CACLF,UADJ,SACA,GACMpE,KAAKuE,MAAM,YAAaC,KAG5BC,QAAS,CACPC,YADJ,WAEM1E,KAAKuE,MAAM,eACXvE,KAAKoE,WAAY,GAEnBjB,YALJ,WAMMnD,KAAK0E,cACL1E,KAAKoE,WAAY,EACjBpE,KAAKqE,aAAc,EACnBrE,KAAK2E,kBAEPtB,WAXJ,WAYMrD,KAAKoE,WAAY,EAIjBpE,KAAK0E,eAOPC,eAvBJ,WAwBM3E,KAAK4E,oBAEPA,iBA1BJ,WA0BA,WAGA,GACQC,MAAO,GAKPC,MAAO,CACLC,iBAAiB,EACjBC,kBAAkB,EAClBC,kBAAkB,EAClBC,sBAAsB,IAIhC,EAAM,WAAN,2KAGA,uCACA,GAJA,OAGA,EAHA,yDAOA,gBAPA,gCASA,GATA,2GAAM,GAYN,EAAM,WAAN,kKACA,IADA,OACA,EADA,OAIA,8CACA,mEAEA,eAPA,6FAAM,GASAC,KAEFC,UAlEJ,SAkEA,cACWC,GAKLA,EAAOC,iBAAiB,YAAY,WAClC,EAAR,iBAGMtF,KAAKuF,sBAAsBF,GAAQ,WACjC,EAAR,iBAGMrF,KAAKuE,MAAM,YAAac,IAZtBrF,KAAK0E,eAcTa,sBAlFJ,SAkFA,KACM,IAAIC,EAAmB,QACnB,eAAgBH,IAClBG,EAAmB,YAErBH,EAAOC,iBACb,GACA,WACQ,IACA,EAAR,gBAEA,GAEMD,EAAOI,iBAAiBC,SAAQ,SAAtC,GACQC,EAAML,iBACd,GACA,WACU,IACA,EAAV,gBAEA,MAGMD,EAAOO,iBAAiBF,SAAQ,SAAtC,GACQC,EAAML,iBACd,GACA,WACU,IACA,EAAV,gBAEA,SCrIyV,I,YCOrVO,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QClBX,EAAS,WAAa,IAAIlF,EAAIX,KAASY,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAC/F,EAAkB,G,6ECatB,GACE0B,KAAM,qBACNyB,MAAO,CACLzC,UAAW,CACTsE,KAAMC,OACNC,QAAS,MAEXvE,OAAQ,CACNqE,KAAM/F,OACNiG,QAAS,WAEXC,aAAc,CACZH,KAAM/F,OACNiG,QAAS,IAEXE,OAAQ,CACNJ,KAAM/F,OACNiG,QAAS,KAGbxC,KApBF,WAqBI,MAAO,CACL2C,WAAY,OAGhBC,QAzBF,WAyBA,WAEIC,OAAOf,iBACX,WACA,WACA,iDAEM,EAAN,iBAEA,GAGIe,OAAOf,iBACX,UACA,WACA,cAEM,EAAN,iBAEA,IAGEb,QAAS,CACP6B,mCADJ,SACA,wEAEMtG,KAAKmG,WAAa,IAAI,EAA5B,EACMnG,KAAKmG,WAAWI,UAAY,0BAC5BvG,KAAKmG,WAAWK,wBAAyB,EAGzCxG,KAAKmG,WAAWM,mBAAqB,iBAErCzG,KAAKmG,WAAWO,SAAW,KACvB1G,KAAKiG,cAAgBjG,KAAKiG,aAAa9F,SACzCH,KAAKmG,WAAWO,SAAW1G,KAAKiG,cAGlCjG,KAAKmG,WAAWQ,YAAa,EAC7B3G,KAAKmG,WAAWS,QAAU,CACxB9B,OAAO,EACPD,OAAO,EACPrB,MAAM,EACNqD,QAAQ,GAGV7G,KAAKmG,WAAWW,WAAa,CAC3BC,MAAM,EACNC,MAAM,GAERhH,KAAKmG,WAAWc,mBAAqB,QAErCjH,KAAKmG,WAAWe,aAAe,CAC7BC,KAAK,EACLC,KAAK,GAGPpH,KAAKmG,WAAWkB,iBAAmB,CACjCC,SAAU,GACVC,UAAW,IAGbvH,KAAKmG,WAAWqB,QAAUxH,KAAKmG,WAAWsB,UAAYzH,KAAKmG,WAAWuB,OAElE1H,KAAKkG,QAAUlG,KAAKkG,OAAO/F,SAC7BH,KAAKmG,WAAWqB,QAAUxH,KAAKmG,WAAWsB,UAAYzH,KAAKmG,WAAWuB,OAAS1H,KAAKkG,QAGtFlG,KAAKmG,WAAWwB,qBAAsB,EACtC3H,KAAKmG,WAAWyB,uBAAwB,EAExC5H,KAAKmG,WAAW0B,WAAaC,EAAnC,qBAEM9H,KAAKmG,WAAW4B,WAAa,SAAnC,GAmBQ,OAlBI,EAAZ,WAEA,cACA,oBACA,oBACA,+BAEYC,EAAM9E,EAAa8E,EAAK,EAApC,WACYA,EAAMC,EAAlB,yBACcC,IAAK,EAAnB,UACcC,IAAK,EAAnB,aAKc,EAAd,+BACUH,EAAMC,EAAhB,8BAEeD,GAIThI,KAAKmG,WAAWiC,eAAeb,UAAY,CACzCc,qBAAqB,EACrBC,qBAAqB,GAGvBtI,KAAKmG,WAAWoC,SAAWvI,KAAKmG,WAAWqC,cAAgB,SAAjE,GACQ,IACEC,EAAMC,aAAaC,eACZF,EAAMC,aACvB,YAGM1I,KAAKmG,WAAWyC,qBAAuB,SAA7C,GACQ,EAAR,oBAIM5I,KAAKmG,WAAW0C,sBAAuB,EAGvC7I,KAAKmG,WAAW2C,cAAcC,KAAK1D,IAGzC,GACA,4DAEQrF,KAAKmG,WAAW2C,cAAc,GAAGE,YACzC,sDAMM,IAAIC,EAAO,IACjB,0BACQ,OAAK,EAAb,WAMY,EAAZ,wBACU,EAAV,uBACUC,cAAcC,KAIhBF,GAAQ,KACJA,EAAK9I,OAAS,IAChB8I,EAAO,UAGT,EAAR,oBAhBU,EAAV,uBACUC,cAAcC,MAgBxB,KAIMnJ,KAAKmG,WAAWiD,kBAAoBpJ,KAAKmG,WAAWsB,UAEpD,IAAN,kBACY4B,GACFC,MAAMD,GAIR,EAAR,0CAEQ,EAAR,kBAEQ,EAAR,qBACA,gCACA,YACA,sBACY,EAAZ,eACA,yBACA,yCACA,OAOMrJ,KAAKmG,WAAWoD,mBAAqB,WAE/B,EAAZ,0CAEQ,EAAR,eAGMvJ,KAAKmG,WAAWqD,cAAgB,WAC9BF,MAAM,sDAENG,YAAW,WACT,EAAV,gBACA,MAOMzJ,KAAKmG,WAAWuD,UAAY,SAAlC,GACYjB,EAAMjF,KAAKmG,gBAMb,EAAV,iBACYC,qBAAqB,EACrBC,aAAcpB,EAAMjF,KAAKqG,gBAa/B7J,KAAKmG,WAAW2D,KAAK9J,KAAKmG,WAAWsB,UAAWsC,GAGhD/J,KAAKmG,WAAW6D,QAAU,SAAhC,GACQ,IAAR,oCACA,WACYC,EAAapK,SAAS4I,EAAMf,SAC9BwC,IAEF,EAAR,mBAGMlK,KAAKmG,WAAWgE,mBAAqB,WACnC,IAAR,2CAIQ,EAAR,eACA,gCAIIC,eA3NJ,SA2NA,GACMpK,KAAKuE,MAAM,cAAe2F,IAE5BxF,YA9NJ,WA+NM,GAAI1E,KAAKmG,WAAY,CACnBnG,KAAKmG,WAAW2C,cAAcpD,SAAQ,SAA9C,GACU,IACEL,EAAOgF,YAAY3E,SAAQ,SAAvC,GACc,IACEC,EAAM2E,OACtB,cAEA,cAGQ,IACEtK,KAAKmG,WAAWoE,QAC1B,UAEQ,IACEvK,KAAKmG,WAAWqE,cAC1B,UAEQtB,cAAclJ,KAAKmG,WAAWgD,QAE9BnJ,KAAKmG,WAAa,KAGpBnG,KAAKoK,eAAe,MAK1B,SAASlH,EAAa8E,EAAKtF,GAMzB,OALAsF,EAAMA,EAAIyC,QAAQ,sBAAuB,IACzCzC,EAAMA,EAAIyC,QACZ,mBACA,iCAESzC,EC/TmV,QCOxV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QC0Pf,GACExF,KAAM,WACNkI,WAAY,CACVC,QAAJ,OACIC,SAAJ,EACIC,SAAJ,EACIC,gBAAJ,EACIC,mBAAJ,GAEEvH,KATF,WAUI,MAAO,CACLvB,aAAa,EAEbC,UAAW,KACX8I,WAAY,KACZC,YAAa,KACbtJ,cAAe,GACfD,QAAS2E,OAAO6E,aAAaC,QAAQ,YAAc,GACnD1J,OAAQ,MACRD,UAAW,KACXL,SAAS,EACTiK,iBAAkB,qBAClBhI,YAAa,EACbf,mBAAoB,KAGxB+D,QA1BF,aAwCE3B,QAAS,CACPtB,YADJ,WACA,8DAGM,GAFAnD,KAAKmB,QAAUA,EAGrB,kCACA,kDAEQnB,KAAKuB,oBAJP,CAQAvB,KAAK0B,QAAU,GAEX2E,OAAO6E,aAAaC,QAAQ,aAC9BnL,KAAK0B,QAAU2E,OAAO6E,aAAaC,QAAQ,YAG7C,IAAN,eACUE,EAAgBxL,SAASG,KAAK0B,SAChC1B,KAAKqC,mBAAqB,WAI5BrC,KAAKsL,MAAMC,SAASpI,gBAEtBE,WA1BJ,WA2BMrD,KAAKsL,MAAMC,SAASlI,cAEtBR,YA7BJ,WA8BM7C,KAAK0B,QAAU1B,KAAK0B,QAC1B,OACA,oBACA,8BACA,cACM2E,OAAO6E,aAAaM,QAAQ,UAAWxL,KAAK0B,UAE9CwB,aArCJ,SAqCA,GACM,IACElD,KAAKwB,UAAYiK,SAAS/I,GAClC,SACQ1C,KAAKwB,UAAY,OAGrByB,UA5CJ,SA4CA,GACMjD,KAAKyB,OAASiK,GAEhBpK,YA/CJ,SA+CA,GACMtB,KAAKsL,MAAMnF,WAAWG,mCAC5B,EACA,eAGI1E,YArDJ,SAqDA,GACM5B,KAAKqC,mBAAqB,GAC1BrC,KAAKkC,UAAYyJ,GAEnBpK,cAzDJ,WA0DMvB,KAAKsL,MAAMnF,WAAWzB,eAExB5C,UA5DJ,SA4DA,GACM9B,KAAKqC,mBAAqBuJ,EAC1B5L,KAAK0B,QAAU,IAEjBL,YAhEJ,SAgEA,GACMrB,KAAKiC,YAAcmC,GAErBvC,cAnEJ,SAmEA,GACM7B,KAAKoD,YAAc8G,KCxXyT,ICQ9U,G,UAAY,eACd,EACAxJ,EACA4C,GACA,EACA,KACA,WACA,OAIa,e,oEClBf,IAAIuI,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAM,EAAQ,QACdC,EAAU,EAAQ,QAClBC,EAAoB,EAAQ,QAC5BC,EAAc,EAAQ,QACtBC,EAAQ,EAAQ,QAChBC,EAAS,EAAQ,QACjBC,EAAsB,EAAQ,QAA8CC,EAC5EC,EAA2B,EAAQ,QAAmDD,EACtFE,EAAiB,EAAQ,QAAuCF,EAChEG,EAAO,EAAQ,QAA4BA,KAE3CC,EAAS,SACTC,EAAef,EAAOc,GACtBE,EAAkBD,EAAaE,UAG/BC,EAAiBd,EAAQI,EAAOQ,KAAqBF,EAIrDK,EAAW,SAAUC,GACvB,IACIC,EAAOC,EAAOC,EAAOC,EAASC,EAAQpN,EAAQqN,EAAOC,EADrDjN,EAAK4L,EAAYc,GAAU,GAE/B,GAAiB,iBAAN1M,GAAkBA,EAAGL,OAAS,EAGvC,GAFAK,EAAKmM,EAAKnM,GACV2M,EAAQ3M,EAAGkN,WAAW,GACR,KAAVP,GAA0B,KAAVA,GAElB,GADAC,EAAQ5M,EAAGkN,WAAW,GACR,KAAVN,GAA0B,MAAVA,EAAe,OAAOO,SACrC,GAAc,KAAVR,EAAc,CACvB,OAAQ3M,EAAGkN,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIL,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQ9M,EAInB,IAFA+M,EAAS/M,EAAGoN,MAAM,GAClBzN,EAASoN,EAAOpN,OACXqN,EAAQ,EAAGA,EAAQrN,EAAQqN,IAI9B,GAHAC,EAAOF,EAAOG,WAAWF,GAGrBC,EAAO,IAAMA,EAAOH,EAAS,OAAOK,IACxC,OAAOlC,SAAS8B,EAAQF,GAE5B,OAAQ7M,GAKZ,GAAIuL,EAASa,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAS3F,IARA,IAcqBgB,EAdjBC,EAAgB,SAAgBpL,GAClC,IAAIlC,EAAKN,UAAUC,OAAS,EAAI,EAAIuC,EAChCqL,EAAQ/N,KACZ,OAAO+N,aAAiBD,IAElBd,EAAiBX,GAAM,WAAcS,EAAgBkB,QAAQC,KAAKF,MAAa7B,EAAQ6B,IAAUnB,GACjGT,EAAkB,IAAIU,EAAaI,EAASzM,IAAMuN,EAAOD,GAAiBb,EAASzM,IAElF0N,EAAOrC,EAAcU,EAAoBM,GAAgB,6KAMhEsB,MAAM,KAAMC,EAAI,EAAQF,EAAK/N,OAASiO,EAAGA,IACrCnC,EAAIY,EAAcgB,EAAMK,EAAKE,MAAQnC,EAAI6B,EAAeD,IAC1DnB,EAAeoB,EAAeD,EAAKpB,EAAyBI,EAAcgB,IAG9EC,EAAcf,UAAYD,EAC1BA,EAAgBuB,YAAcP,EAC9B9B,EAASF,EAAQc,EAAQkB,K,qBC5E3B,IAAIQ,EAAkB,EAAQ,QAE1BC,EAAQD,EAAgB,SAE5BhO,EAAOC,QAAU,SAAUiO,GACzB,IAAIC,EAAS,IACb,IACE,MAAMD,GAAaC,GACnB,MAAOC,GACP,IAEE,OADAD,EAAOF,IAAS,EACT,MAAMC,GAAaC,GAC1B,MAAOjC,KACT,OAAO,I,kCCZX,IAAIlN,EAAI,EAAQ,QACZqP,EAAY,EAAQ,QAA+B9O,SACnD+O,EAAmB,EAAQ,QAC3BC,EAA0B,EAAQ,QAElCC,EAAiBD,EAAwB,UAAW,CAAEE,WAAW,EAAMC,EAAG,IAI9E1P,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,QAASkP,GAAkB,CAC3DjP,SAAU,SAAkBoP,GAC1B,OAAON,EAAU3O,KAAMiP,EAAI/O,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAKrEwO,EAAiB","file":"js/streamer.4ee101cc.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=style&index=0&id=3d13a6b0&scoped=true&lang=sass&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=style&index=0&id=3d13a6b0&scoped=true&lang=sass&\"","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frow centered\"},[_c('DesktopCapturer',{ref:\"capturer\",attrs:{\"enableVideo\":_vm.isVideo},on:{\"isSharing\":_vm.onIsSharing,\"gotStream\":_vm.onGotStream,\"setDefaults\":_vm.onSetDefaults}}),_c('StreamerConnection',{ref:\"connection\",attrs:{\"bandwidth\":_vm.bandwidth,\"codecs\":_vm.codecs,\"roomId\":_vm.room_id,\"roomPassword\":_vm.room_password},on:{\"sessionId\":_vm.onSessionId,\"viewerCount\":_vm.onViewerCount,\"idTaken\":_vm.onIdTaken}}),_c('div',{staticClass:\"col-md-1-2\"},[_c('LogoSvg',{attrs:{\"id\":\"logo\"}}),_c('div',{class:{ live: _vm.isSharingOn && _vm.sessionId },attrs:{\"id\":\"live-indicator\"}},[_vm._v(\"LIVE\")])],1),_c('div',{staticClass:\"col-md-1-2\"},[(_vm.useridAlreadyTaken)?_c('div',{attrs:{\"id\":\"id-taken\"}},[_vm._v(\"⚠️ Whoops,\"),_c('b',[_vm._v(\" \"+_vm._s(_vm.useridAlreadyTaken)+\" \")]),_vm._v(\"already taken! Please choose another room name.\")]):_vm._e(),(!_vm.isSharingOn || !_vm.sessionId)?_c('section',{attrs:{\"id\":\"setup-section\"}},[_c('label',{staticClass:\"row-start\",attrs:{\"id\":\"room-id-label\"}},[_c('span',{staticClass:\"shrink-0\"},[_vm._v(\"2n.fm/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.room_id),expression:\"room_id\"}],attrs:{\"id\":\"room-id\",\"type\":\"text\",\"placeholder\":\"Random\"},domProps:{\"value\":(_vm.room_id)},on:{\"change\":_vm.setRoomName,\"blur\":_vm.setRoomName,\"input\":function($event){if($event.target.composing){ return; }_vm.room_id=$event.target.value}}})]),_c('section',{attrs:{\"id\":\"options\",\"hidden\":\"\"}},[_c('div',{staticClass:\"label\"},[_vm._v(\"Options\")]),_c('div',{staticClass:\"frow row-start gutters\"},[_vm._m(0),_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"settings-item\"},[_c('label',[_vm._v(\"Codec\"),_c('select',{attrs:{\"id\":\"codecs\"},on:{\"change\":_vm.setCodecs}},[_c('option',{attrs:{\"value\":\"default\",\"selected\":\"\"}},[_vm._v(\"Default (VP9)\")]),_c('option',{attrs:{\"value\":\"vp8\"}},[_vm._v(\"VP8\")]),_c('option',{attrs:{\"value\":\"vp9\"}},[_vm._v(\"VP9\")]),_c('option',{attrs:{\"value\":\"h264\"}},[_vm._v(\"H264\")])])])])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"settings-item mb-0\"},[_c('label',[_vm._v(\"Bandwidth\"),_c('input',{attrs:{\"id\":\"bandwidth\",\"type\":\"text\",\"value\":\"\",\"placeholder\":\"Optional: 8192, 1048, 512, etc.\"},on:{\"change\":_vm.setBandwidth}})])])]),_vm._m(1)])]),_c('section',{attrs:{\"id\":\"stream-section\"}},[_c('div',{attrs:{\"id\":\"start\"}},[_c('div',{staticClass:\"label\"},[_vm._v(\"Start\")]),_c('div',{staticClass:\"frow gutters\"},[_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"stream-button\",attrs:{\"id\":\"video-button\"},on:{\"click\":function($event){return _vm.startStream(true)}}},[_c('div',{staticClass:\"frow column-center\"},[_c('VideoSvg'),_vm._v(\"Video\")],1)])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"stream-button\",attrs:{\"id\":\"audio-button\"},on:{\"click\":function($event){return _vm.startStream()}}},[_c('div',{staticClass:\"frow column-center\"},[_c('AudioSvg'),_vm._v(\"Audio Only\")],1)])])])])])]):_vm._e(),(_vm.isSharingOn && _vm.sessionId)?_c('section',{attrs:{\"id\":\"stop-section\"}},[_c('router-link',{attrs:{\"id\":\"public-link\",\"to\":_vm.sessionId,\"target\":\"_blank\"}},[_vm._v(_vm._s((\"2n.fm/\" + _vm.sessionId)))]),_c('div',{staticClass:\"viewer-count\"},[_c('span',{attrs:{\"id\":\"viewer-count-number\"}}),_vm._v(_vm._s(_vm.viewerCount)+\" \"+_vm._s(_vm.viewerCount === 1 ? 'Viewer' : 'Viewers'))]),_c('button',{attrs:{\"id\":\"stop-sharing\",\"type\":\"button\"},on:{\"click\":_vm.stopStream}},[_vm._v(\"End Sharing\")])],1):_vm._e(),_vm._m(2)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"settings-item\"},[_c('label',[_vm._v(\"Resolution\"),_c('select',{attrs:{\"id\":\"resolutions\"}},[_c('option',{attrs:{\"value\":\"fit-screen\",\"selected\":\"\"}},[_vm._v(\"Fit Screen\")]),_c('option',{attrs:{\"value\":\"4K\"}},[_vm._v(\"4K (2160p)\")]),_c('option',{attrs:{\"value\":\"1080p\"}},[_vm._v(\"Full-HD (1080p)\")]),_c('option',{attrs:{\"value\":\"720p\"}},[_vm._v(\"HD (720p)\")]),_c('option',{attrs:{\"value\":\"480p\"}},[_vm._v(\"SD (480p)\")]),_c('option',{attrs:{\"value\":\"360p\"}},[_vm._v(\"SD (360p)\")])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"settings-item mb-0\"},[_c('label',[_vm._v(\"Room Password\"),_c('input',{attrs:{\"id\":\"room_password\",\"type\":\"password\",\"value\":\"\",\"placeholder\":\"Optional\"}})])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frow width-100 mt-20\"},[_c('a',{staticClass:\"text-underline\",attrs:{\"href\":\"https://caniuse.com/#search=getDisplayMedia\",\"rel\":\"noreferrer\",\"target\":\"_blank\"}},[_vm._v(\"OS and Browser Limitations\")])])}]\n\nexport { render, staticRenderFns }","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('g',{attrs:{\"fill\":\"none\",\"fill-rule\":\"evenodd\"}},[_c('path',{attrs:{\"d\":\"M1 18v3h3c0-1.7-1.3-3-3-3zm0-4v2c2.8 0 5 2.2 5 5h2c0-3.9-3.1-7-7-7zm0-4v2c5 0 9 4 9 9h2c0-6.1-4.9-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"}})])])\n          )\n        }\n      }\n    ","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"d\":\"M2 6h3.828c-1.335 2.905-1.335 9.096 0 12H2c-1.311-1.108-2-3.551-2-5.995C0 9.555.692 7.105 2 6zm22 6.005c.005 8.031-3.145 12.864-6.121 11.864-.774-.26-9.567-5.579-9.567-5.579-1.993-2.22-1.993-10.288 0-12.508 0 0 9.161-5.476 9.548-5.633 2.691-1.086 6.136 3.82 6.14 11.856zm-3.383-7.693c-1.053-2.264-3.002-2.226-4.034.002-.588 1.271-.993 3.165-1.21 4.797h.527c1.587 0 2.873 1.287 2.873 2.875s-1.286 2.875-2.873 2.875h-.515c.217 1.603.616 3.538 1.206 4.89.988 2.271 3.062 2.232 4.033-.002 1.946-4.477 1.772-11.609-.007-15.437z\"}})])\n          )\n        }\n      }\n    ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  \n</template>\n\n<script>\nexport default {\n  name: 'DesktopCapturer',\n  props: {\n    enableVideo: Boolean,\n  },\n  data() {\n    return {\n      isSharing: false,\n      enableAudio: false,\n    };\n  },\n  watch: {\n    isSharing(newValue) {\n      this.$emit('isSharing', newValue);\n    },\n  },\n  methods: {\n    setDefaults() {\n      this.$emit('setDefaults');\n      this.isSharing = false;\n    },\n    startStream() {\n      this.setDefaults();\n      this.isSharing = true;\n      this.enableAudio = true;\n      this.captureDesktop();\n    },\n    stopStream() {\n      this.isSharing = false;\n\n      // SM: post Vue migration, what previously ran in captureDesktop is instead in setDefaults\n      // this.captureDesktop();\n      this.setDefaults();\n\n      // runtimePort.postMessage({\n      //   messageFromContentScript1234: true,\n      //   stopSharing: true,\n      // });\n    },\n    captureDesktop() {\n      this.onAccessApproved();\n    },\n    onAccessApproved() {\n      // console.log(navigator.mediaDevices.getSupportedConstraints());\n\n      let constraints = {\n        video: {\n          // TODO: displaySurface support is waiting on browser support\n          // https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\n          // displaySurface: [\"application\", \"browser\", \"monitor\", \"window\"]\n        },\n        audio: {\n          autoGainControl: false,\n          echoCancellation: false,\n          noiseSuppression: false,\n          googDisableLocalEcho: false, // https://www.chromestatus.com/feature/5056629556903936\n        },\n      };\n\n      const startScreenCapture = async () => {\n        let captureStream;\n        try {\n          captureStream = await navigator.mediaDevices.getDisplayMedia(\n            constraints,\n          );\n        } catch (err) {\n          this.setDefaults();\n        }\n        return captureStream;\n      };\n\n      const startCapturing = async () => {\n        let stream = await startScreenCapture();\n        // console.log(stream.getTracks()[0].getCapabilities());\n        // console.log(stream.getTracks()[0].getSettings());\n        if (!this.enableVideo && stream.getAudioTracks().length === 0) {\n          alert('Make sure to check the \"Share audio\" box in Google Chrome');\n        }\n        this.gotStream(stream);\n      };\n      startCapturing();\n    },\n    gotStream(stream) {\n      if (!stream) {\n        this.setDefaults();\n        return;\n      }\n\n      stream.addEventListener('inactive', () => {\n        this.setDefaults();\n      });\n\n      this.addStreamStopListener(stream, () => {\n        this.setDefaults();\n      });\n\n      this.$emit('gotStream', stream);\n    },\n    addStreamStopListener(stream, callback) {\n      var streamEndedEvent = 'ended';\n      if ('oninactive' in stream) {\n        streamEndedEvent = 'inactive';\n      }\n      stream.addEventListener(\n        streamEndedEvent,\n        function() {\n          callback();\n          callback = function() {};\n        },\n        false,\n      );\n      stream.getAudioTracks().forEach(function(track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function() {\n            callback();\n            callback = function() {};\n          },\n          false,\n        );\n      });\n      stream.getVideoTracks().forEach(function(track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function() {\n            callback();\n            callback = function() {};\n          },\n          false,\n        );\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DesktopCapturer.vue?vue&type=template&id=4c2b97f4&lang=pug&\"\nimport script from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\nexport * from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  \n</template>\n\n<script>\n// NOTE: needs to be imported for back-compat, but not referenced\n// eslint-disable-next-line no-unused-vars\nimport adapter from 'webrtc-adapter';\n\nimport RTCMultiConnection from 'rtcmulticonnection';\n\nimport { CodecsHandler } from '../utils/background/helpers/CodecsHandler';\nimport { IceServersHandler } from '../utils/background/helpers/IceServersHandler';\n\nexport default {\n  name: 'StreamerConnection',\n  props: {\n    bandwidth: {\n      type: Number,\n      default: 8192,\n    },\n    codecs: {\n      type: String,\n      default: 'default',\n    },\n    roomPassword: {\n      type: String,\n      default: '',\n    },\n    roomId: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      connection: null,\n    };\n  },\n  mounted() {\n    // TODO: should probably deregister the event listener on e.g. `unmounted`\n    window.addEventListener(\n      'offline',\n      () => {\n        if (!this.connection || !this.connection.attachStreams.length) return;\n\n        this.setDefaults();\n      },\n      false,\n    );\n\n    window.addEventListener(\n      'online',\n      () => {\n        if (!this.connection) return;\n\n        this.setDefaults();\n      },\n      false,\n    );\n  },\n  methods: {\n    shareStreamUsingRTCMultiConnection(stream, isVideo = false) {\n      // www.RTCMultiConnection.org/docs/\n      this.connection = new RTCMultiConnection();\n      this.connection.socketURL = 'https://api.2n.fm:9001/';\n      this.connection.autoCloseEntireSession = true;\n\n      // this must match the viewer page\n      this.connection.socketMessageEvent = 'desktopCapture';\n\n      this.connection.password = null;\n      if (this.roomPassword && this.roomPassword.length) {\n        this.connection.password = this.roomPassword;\n      }\n\n      this.connection.enableLogs = false;\n      this.connection.session = {\n        audio: true,\n        video: true,\n        data: true,\n        oneway: true,\n      };\n\n      this.connection.candidates = {\n        stun: true,\n        turn: true,\n      };\n      this.connection.iceTransportPolicy = 'relay';\n\n      this.connection.iceProtocols = {\n        tcp: true,\n        udp: true,\n      };\n\n      this.connection.optionalArgument = {\n        optional: [],\n        mandatory: {},\n      };\n\n      this.connection.channel = this.connection.sessionid = this.connection.userid;\n\n      if (this.roomId && this.roomId.length) {\n        this.connection.channel = this.connection.sessionid = this.connection.userid = this.roomId;\n      }\n\n      this.connection.autoReDialOnFailure = true;\n      this.connection.getExternalIceServers = false;\n\n      this.connection.iceServers = IceServersHandler.getIceServers();\n\n      this.connection.processSdp = (sdp) => {\n        if (this.bandwidth) {\n          if (\n            this.bandwidth &&\n            !isNaN(this.bandwidth) &&\n            this.bandwidth != 'NaN' &&\n            typeof this.bandwidth == 'number'\n          ) {\n            sdp = setBandwidth(sdp, this.bandwidth);\n            sdp = CodecsHandler.setVideoBitrates(sdp, {\n              min: this.bandwidth,\n              max: this.bandwidth,\n            });\n          }\n        }\n\n        if (!!this.codecs && this.codecs !== 'default') {\n          sdp = CodecsHandler.preferCodec(sdp, this.codecs);\n        }\n        return sdp;\n      };\n\n      // www.rtcmultiexternalThis.connection.org/docs/sdpConstraints/\n      this.connection.sdpConstraints.mandatory = {\n        OfferToReceiveAudio: false,\n        OfferToReceiveVideo: false,\n      };\n\n      this.connection.onstream = this.connection.onstreamended = (event) => {\n        try {\n          event.mediaElement.pause();\n          delete event.mediaElement;\n        } catch (e) {}\n      };\n\n      this.connection.onUserIdAlreadyTaken = (useridAlreadyTaken) => {\n        this.$emit('idTaken', useridAlreadyTaken);\n      };\n\n      // www.RTCMultiConnection.org/docs/dontCaptureUserMedia/\n      this.connection.dontCaptureUserMedia = true;\n\n      // www.RTCMultiConnection.org/docs/attachStreams/\n      this.connection.attachStreams.push(stream);\n\n      if (\n        !isVideo &&\n        this.connection.attachStreams[0].getVideoTracks().length > 0\n      ) {\n        this.connection.attachStreams[0].removeTrack(\n          this.connection.attachStreams[0].getVideoTracks()[0],\n        );\n      }\n\n      // console.log(\"connectionHere\", externalThis.connection.attachStreams[0].getAudioTracks());\n\n      var text = '-';\n      const looper = setInterval(() => {\n        if (!this.connection) {\n          this.setViewerCount(0);\n          clearInterval(looper);\n          return;\n        }\n\n        if (this.connection.isInitiator) {\n          this.setViewerCount(0);\n          clearInterval(looper)\n          return;\n        }\n\n        text += ' -';\n        if (text.length > 6) {\n          text = '-';\n        }\n\n        this.setViewerCount(text);\n      }, 500);\n      \n\n      // www.RTCMultiConnection.org/docs/open/\n      this.connection.socketCustomEvent = this.connection.sessionid;\n\n      const roomOpenCallback = (isRoomOpened, roomid, error) => {\n        if (error) {\n          alert(error);\n        }\n\n        // any key-values set here should be reset in setDefaults.js\n        this.$emit('sessionId', this.connection.sessionid);\n\n        this.setViewerCount(0);\n\n        this.connection.socket.on(\n          this.connection.socketCustomEvent,\n          (message) => {\n            if (message.receivedYourScreen) {\n              this.setViewerCount(\n                this.connection.isInitiator\n                  ? this.connection.getAllParticipants().length\n                  : 0,\n              );\n            }\n          },\n        );\n      };\n\n      this.connection.onSocketDisconnect = () => {\n        // alert('externalThis.connection to the server is closed.');\n        if (this.connection.getAllParticipants().length > 0) return;\n\n        this.setDefaults();\n      };\n\n      this.connection.onSocketError = () => {\n        alert('Unable to connect to the server. Please try again.');\n\n        setTimeout(() => {\n          this.setDefaults();\n        }, 1000);\n      };\n\n      // this.connection.onopen = (event) => {\n      //   //\n      // };\n\n      this.connection.onmessage = (event) => {\n        if (event.data.newChatMessage) {\n          // this.runtimePort.postMessage({\n          //   messageFromContentScript1234: true,\n          //   newChatMessage: event.data.newChatMessage\n          // });\n\n          this.connection.send({\n            receivedChatMessage: true,\n            checkmark_id: event.data.checkmark_id,\n          });\n        }\n\n        // if (event.data.receivedChatMessage) {\n        //   this.runtimePort.postMessage({\n        //     messageFromContentScript1234: true,\n        //     receivedChatMessage: true,\n        //     checkmark_id: event.data.checkmark_id\n        //   });\n        // }\n      };\n\n      this.connection.open(this.connection.sessionid, roomOpenCallback);\n\n      var oldLength = 0;\n      this.connection.onleave = (event) =>{\n        const participants = this.connection.getAllParticipants();\n        let count = participants.length;\n        if (participants.includes(event.userid)) {\n          count--;\n        }\n        this.setViewerCount(count);\n      };\n\n      this.connection.onPeerStateChanged = () => {\n        const participantsCount = this.connection.getAllParticipants().length;\n        if (oldLength != participantsCount) {\n          // sendTabTitle();\n        }\n        this.setViewerCount(\n          this.connection.isInitiator ? participantsCount : 0,\n        );\n      };\n    },\n    setViewerCount(count) {\n      this.$emit('viewerCount', count);\n    },\n    setDefaults() {\n      if (this.connection) {\n        this.connection.attachStreams.forEach((stream) => {\n          try {\n            stream.getTracks().forEach((track) => {\n              try {\n                track.stop();\n              } catch (e) {}\n            });\n          } catch (e) {}\n        });\n\n        try {\n          this.connection.close();\n        } catch (e) {}\n\n        try {\n          this.connection.closeSocket();\n        } catch (e) {}\n\n        clearInterval(this.connection.looper);\n\n        this.connection = null;\n      }\n\n      this.setViewerCount(0);\n    },\n  },\n};\n\nfunction setBandwidth(sdp, value) {\n  sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n  sdp = sdp.replace(\n    /a=mid:video\\r\\n/g,\n    'a=mid:video\\r\\nb=AS:' + value + '\\r\\n',\n  );\n  return sdp;\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamerConnection.vue?vue&type=template&id=71515154&lang=pug&\"\nimport script from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style scoped lang=\"sass\">\n.card\n  background-color: $white\n  padding: 15px\n  text-align: center\n\n#logo\n  margin: 0 auto\n  width: 228px\n  height: auto\n  fill: $primary-color\n\n#live-indicator\n  margin: 15px auto 0\n  width: 228px\n  color: $tertiary-color\n  border-radius: 20px\n  border: 6px solid $tertiary-color\n  font-weight: bold\n  font-size: 91px\n  text-align: center\n\n  &.live\n    color: red\n    border-color: red\n    animation: pulse 1.5s ease-in-out infinite alternate\n\n#id-taken\n  color: #721c24\n  background-color: #f8d7da\n  border: 1px solid #f5c6cb\n  padding: 0.6em\n  margin-top: 0.5em\n  border-radius: $border-radius-small\n\n/* XS\n@media (max-width: 767px)\n  #logo\n    margin: 0 auto\n    width: 114px\n  #live-indicator\n    width: 114px\n    border-radius: 10px\n    border: 3px solid $tertiary-color\n    font-size: 45px\n    margin-bottom: 30px\n\n#room-id-label\n  font-size: 40px\n  color: $primary-color\n\n  input\n    font-size: 40px\n    border-width: 4px\n\n/* XS\n@media (max-width: 767px)\n  #room-id-label\n    font-size: 30px\n\n    input\n      font-size: 30px\n      border-width: 2px\n\n#options\n  border: 2px solid $tertiary-color\n  border-radius: 10px\n  padding: 40px\n  margin: 40px 0\n  position: relative\n\n  .label\n    position: absolute\n    top: -9px\n    left: 30px\n    background-color: $white\n    padding: 0 8px\n    width: auto\n\n.settings-item\n  margin-bottom: 40px\n\n  label\n    margin-bottom: 0\n\n#start\n  border: 2px solid $tertiary-color\n  border-radius: 10px\n  padding: 40px\n  margin-top: 40px\n  position: relative\n\n  .label\n    position: absolute\n    top: -9px\n    left: 30px\n    background-color: $white\n    padding: 0 8px\n    width: auto\n\n.stream-button\n  cursor: pointer\n  transition: color 0.3s\n\n  &:hover\n    color: $black\n\n  svg\n    width: auto\n    height: 40px\n    margin-bottom: 10px\n\n  path\n    fill: $primary-color\n    transition: fill 0.3s\n\n  &:hover svg path\n    fill: $black\n\n#public-link\n  display: block\n  font-size: 40px\n  color: $primary-color\n  margin: 0 auto\n  text-align: center\n\n/* XS\n@media (max-width: 767px)\n  #public-link\n    font-size: 30px\n\n.viewer-count\n  margin: 5px auto 60px\n  text-align: center\n  font-size: 20px\n  font-weight: bold\n\n#stop-sharing\n  margin: 0 auto\n  font-size: 40px\n  padding: 20px\n  background: none\n  border: 3px solid $primary-color\n  color: $primary-color\n  border-radius: 10px\n</style>\n\n<template lang=\"pug\">\n.frow.centered\n  DesktopCapturer(\n    ref=\"capturer\"\n    :enableVideo=\"isVideo\"\n    @isSharing=\"onIsSharing\"\n    @gotStream=\"onGotStream\"\n    @setDefaults=\"onSetDefaults\"\n  )\n  StreamerConnection(\n    ref=\"connection\"\n    :bandwidth=\"bandwidth\"\n    :codecs=\"codecs\"\n    :roomId=\"room_id\"\n    :roomPassword=\"room_password\"\n    @sessionId=\"onSessionId\"\n    @viewerCount=\"onViewerCount\"\n    @idTaken=\"onIdTaken\"\n  )\n  .col-md-1-2\n    LogoSvg#logo\n    #live-indicator(:class=\"{ live: isSharingOn && sessionId }\") LIVE\n  .col-md-1-2\n    div#id-taken(v-if=\"useridAlreadyTaken\")\n      | ⚠️ Whoops,\n      b &nbsp;{{useridAlreadyTaken}}&nbsp;\n      | already taken! Please choose another room name.\n    section#setup-section(v-if=\"!isSharingOn || !sessionId\")\n      label#room-id-label.row-start\n        span.shrink-0 2n.fm/\n        input#room-id(\n          type=\"text\"\n          placeholder=\"Random\"\n          v-model=\"room_id\"\n          @change=\"setRoomName\"\n          @blur=\"setRoomName\")\n      section#options(hidden=\"\")\n        .label Options\n        .frow.row-start.gutters\n          .col-xs-1-2\n            .settings-item\n              label\n                | Resolution\n                select#resolutions\n                  option(value=\"fit-screen\" selected=\"\") Fit Screen\n                  option(value=\"4K\") 4K (2160p)\n                  option(value=\"1080p\") Full-HD (1080p)\n                  option(value=\"720p\") HD (720p)\n                  option(value=\"480p\") SD (480p)\n                  option(value=\"360p\") SD (360p)\n          .col-xs-1-2\n            .settings-item\n              label\n                | Codec\n                select#codecs(@change=\"setCodecs\")\n                  option(value=\"default\" selected=\"\") Default (VP9)\n                  option(value=\"vp8\") VP8\n                  option(value=\"vp9\") VP9\n                  option(value=\"h264\") H264\n          .col-xs-1-2\n            .settings-item.mb-0\n              label\n                | Bandwidth\n                input#bandwidth(\n                  type=\"text\"\n                  value=\"\"\n                  placeholder=\"Optional: 8192, 1048, 512, etc.\"\n                  @change=\"setBandwidth\"\n                )\n          .col-xs-1-2\n            .settings-item.mb-0\n              label\n                | Room Password\n                input#room_password(type=\"password\" value=\"\" placeholder=\"Optional\")\n      section#stream-section\n        #start\n          .label Start\n          .frow.gutters\n            .col-xs-1-2\n              #video-button.stream-button(@click=\"startStream(true)\")\n                .frow.column-center\n                  VideoSvg\n                  | Video\n            .col-xs-1-2\n              #audio-button.stream-button(@click=\"startStream()\")\n                .frow.column-center\n                  AudioSvg\n                  | Audio Only\n    section#stop-section(v-if=\"isSharingOn && sessionId\")\n      //- router-link#public-link(\n      //-   to=\"{query: { s: sessionId, p: room_password }}`}\" target=\"_blank\"\n      //- )\n      router-link#public-link(:to=\"sessionId\" target=\"_blank\")\n        | {{ `2n.fm/${sessionId}` }}\n      .viewer-count\n        span#viewer-count-number\n        | {{ viewerCount }} {{ viewerCount === 1 ? 'Viewer' : 'Viewers' }}\n      button#stop-sharing(type=\"button\" @click=\"stopStream\")\n        | End Sharing\n    .frow.width-100.mt-20\n      a.text-underline(\n        href=\"https://caniuse.com/#search=getDisplayMedia\"\n        rel=\"noreferrer\"\n        target=\"_blank\"\n      )\n        | OS and Browser Limitations\n      //\n        <div id=\"enable-chat\">\n        <img src=\"../images/chat.png\">\n        Open Chat Box\n        </div>\n</template>\n\n<script>\nimport LogoSvg from '@/assets/svgs/logo.svg';\nimport VideoSvg from '@/assets/svgs/video.svg';\nimport AudioSvg from '@/assets/svgs/audio.svg';\n\nimport DesktopCapturer from '@/components/DesktopCapturer.vue';\nimport StreamerConnection from '@/components/StreamerConnection.vue';\n\nexport default {\n  name: 'Streamer',\n  components: {\n    LogoSvg,\n    VideoSvg,\n    AudioSvg,\n    DesktopCapturer,\n    StreamerConnection,\n  },\n  data() {\n    return {\n      isSharingOn: false,\n      // sessionId aka room name\n      sessionId: null,\n      desktop_id: null,\n      constraints: null,\n      room_password: '',\n      room_id: window.localStorage.getItem('room_id') || '',\n      codecs: 'vp9',\n      bandwidth: null,\n      isVideo: false,\n      streaming_method: 'RTCMultiConnection',\n      viewerCount: 0,\n      useridAlreadyTaken: '',\n    };\n  },\n  mounted() {\n    // document.getElementById('enable-chat').onclick = function() {\n    //   var popup_width = 312;\n    //   var popup_height = 400;\n    //   runtimePort.postMessage({\n    //     messageFromContentScript1234: true,\n    //     openChat: true\n    //   });\n    //   window.open('chat.html','Chat','width='+popup_width+',height='+popup_height\n    //     +',toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,top='\n    //     +(screen.height - popup_height)+',left=' + (screen.width - popup_width - 30));\n    //   window.close();\n    // };\n  },\n  methods: {\n    startStream(isVideo = false) {\n      this.isVideo = isVideo;\n\n      if (\n        this.$refs.connection.connection &&\n        this.$refs.connection.connection.attachStreams[0]\n      ) {\n        this.onSetDefaults();\n        return;\n      }\n\n      this.room_id = '';\n\n      if (window.localStorage.getItem('room_id')) {\n        this.room_id = window.localStorage.getItem('room_id');\n      }\n\n      let protectedRoutes = ['streamer'];\n      if (protectedRoutes.includes(this.room_id)) {\n        this.useridAlreadyTaken = 'streamer';\n        return;\n      }\n\n      this.$refs.capturer.startStream();\n    },\n    stopStream() {\n      this.$refs.capturer.stopStream();\n    },\n    setRoomName() {\n      this.room_id = this.room_id\n        .trim()\n        .replace(/\\s+/g, '-')\n        .replace(/[^a-zA-Z0-9-_]/g, '')\n        .toLowerCase();\n      window.localStorage.setItem('room_id', this.room_id);\n    },\n    setBandwidth(value) {\n      try {\n        this.bandwidth = parseInt(value);\n      } catch (e) {\n        this.bandwidth = null;\n      }\n    },\n    setCodecs(codec) {\n      this.codecs = codec;\n    },\n    onGotStream(stream) {\n      this.$refs.connection.shareStreamUsingRTCMultiConnection(\n        stream,\n        this.isVideo,\n      );\n    },\n    onSessionId(id) {\n      this.useridAlreadyTaken = '';\n      this.sessionId = id;\n    },\n    onSetDefaults() {\n      this.$refs.connection.setDefaults();\n    },\n    onIdTaken(takenID) {\n      this.useridAlreadyTaken = takenID;\n      this.room_id = '';\n    },\n    onIsSharing(isSharing) {\n      this.isSharingOn = isSharing;\n    },\n    onViewerCount(count) {\n      this.viewerCount = count;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Streamer.vue?vue&type=template&id=3d13a6b0&scoped=true&lang=pug&\"\nimport script from \"./Streamer.vue?vue&type=script&lang=js&\"\nexport * from \"./Streamer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Streamer.vue?vue&type=style&index=0&id=3d13a6b0&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d13a6b0\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.github.io/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.github.io/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n"],"sourceRoot":""}